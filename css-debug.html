<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS调试 - Language Dropdown</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .debug-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        
        .debug-info {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        
        /* 测试样式覆盖 */
        .test-dropdown {
            position: relative;
            display: inline-block;
            margin: 20px 0;
        }
        
        .test-dropdown .language-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 2px solid red;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            min-width: 200px;
            z-index: 9999;
        }
        
        .test-dropdown .language-dropdown.show {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateY(0) !important;
        }
    </style>
</head>
<body>
    <h1>语言下拉菜单CSS调试</h1>
    
    <div class="debug-section">
        <h2>1. 原始HTML结构测试</h2>
        <div class="language-selector">
            <button id="testBtn1" class="language-btn">原始结构 ▼</button>
            <div id="testDropdown1" class="language-dropdown">
                <div class="language-option" data-lang="en">English</div>
                <div class="language-option" data-lang="zh-cn">简体中文</div>
                <div class="language-option" data-lang="zh-tw">繁體中文</div>
            </div>
        </div>
        
        <button onclick="toggleTest1()">切换显示</button>
        <button onclick="debugTest1()">调试样式</button>
        
        <div id="debug1" class="debug-info"></div>
    </div>
    
    <div class="debug-section">
        <h2>2. 强制样式测试</h2>
        <div class="test-dropdown">
            <button id="testBtn2" class="language-btn">强制样式 ▼</button>
            <div id="testDropdown2" class="language-dropdown">
                <div class="language-option" data-lang="en">English</div>
                <div class="language-option" data-lang="zh-cn">简体中文</div>
                <div class="language-option" data-lang="zh-tw">繁體中文</div>
            </div>
        </div>
        
        <button onclick="toggleTest2()">切换显示</button>
        <button onclick="debugTest2()">调试样式</button>
        
        <div id="debug2" class="debug-info"></div>
    </div>
    
    <div class="debug-section">
        <h2>3. 内联样式测试</h2>
        <div class="language-selector">
            <button id="testBtn3" class="language-btn">内联样式 ▼</button>
            <div id="testDropdown3" class="language-dropdown" style="position: absolute; top: 100%; left: 0; background: white; border: 2px solid blue; z-index: 9999; min-width: 200px;">
                <div class="language-option" data-lang="en">English</div>
                <div class="language-option" data-lang="zh-cn">简体中文</div>
                <div class="language-option" data-lang="zh-tw">繁體中文</div>
            </div>
        </div>
        
        <button onclick="toggleTest3()">切换显示</button>
        <button onclick="debugTest3()">调试样式</button>
        
        <div id="debug3" class="debug-info"></div>
    </div>

    <script src="js/i18n.js"></script>
    <script>
        function getComputedStyles(elementId) {
            const element = document.getElementById(elementId);
            if (!element) return 'Element not found';
            
            const computed = window.getComputedStyle(element);
            return {
                display: computed.display,
                opacity: computed.opacity,
                visibility: computed.visibility,
                transform: computed.transform,
                position: computed.position,
                zIndex: computed.zIndex,
                background: computed.background,
                border: computed.border,
                classes: element.className,
                hasShow: element.classList.contains('show')
            };
        }
        
        function debugElement(testNum) {
            const dropdown = document.getElementById(`testDropdown${testNum}`);
            const debugDiv = document.getElementById(`debug${testNum}`);
            
            const styles = getComputedStyles(`testDropdown${testNum}`);
            debugDiv.innerHTML = JSON.stringify(styles, null, 2);
            
            console.log(`Test ${testNum} styles:`, styles);
        }
        
        function toggleTest1() {
            const dropdown = document.getElementById('testDropdown1');
            dropdown.classList.toggle('show');
            debugElement(1);
        }
        
        function toggleTest2() {
            const dropdown = document.getElementById('testDropdown2');
            dropdown.classList.toggle('show');
            debugElement(2);
        }
        
        function toggleTest3() {
            const dropdown = document.getElementById('testDropdown3');
            dropdown.classList.toggle('show');
            // 也尝试内联样式
            if (dropdown.classList.contains('show')) {
                dropdown.style.display = 'block';
                dropdown.style.opacity = '1';
                dropdown.style.visibility = 'visible';
                dropdown.style.transform = 'translateY(0)';
            } else {
                dropdown.style.display = 'none';
            }
            debugElement(3);
        }
        
        function debugTest1() { debugElement(1); }
        function debugTest2() { debugElement(2); }
        function debugTest3() { debugElement(3); }
        
        // 页面加载后立即调试
        document.addEventListener('DOMContentLoaded', function() {
            console.log('CSS Debug page loaded');
            setTimeout(() => {
                debugElement(1);
                debugElement(2);
                debugElement(3);
            }, 500);
        });
    </script>
</body>
</html>